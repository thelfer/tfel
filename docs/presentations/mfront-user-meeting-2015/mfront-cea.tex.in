%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%%	Fichier	   : ces
%%	Auteur     : th202608@pleiades043.intra.cea.fr
%%	Date       : 26 mai 2009
%%	Répertoire : /home/th202608/documents/presentations/2009/CES/
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\documentclass{beamer}

\usepackage{beamerthemecea2012}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{pstricks}
\usepackage{array}
\usepackage{multirow}
\usepackage{couleurs}

\usepackage{mathematiques}
\usepackage{mecanique}
\usepackage{gnuplot}

\usepackage[frenchb]{babel}

\newcommand{\python}{\href{https://www.python.org/}{\texttt{python}}}

\newcommand{\unix}{\texttt{Unix}}
\newcommand{\linux}{\texttt{LiNuX}}
\newcommand{\freebsd}{\href{https://www.freebsd.org/}{\texttt{FreeBSD}}}
\newcommand{\opensolaris}{\texttt{OpenSolaris}}

\newcommand{\windows}{\texttt{Windows}}

\newcommand{\mtest}{\texttt{mtest}}
\newcommand{\umat}{\texttt{umat}}

\newcommand{\adao}{\texttt{adao}}
\newcommand{\tfel}{\href{http://www.tfel.sourceforge.net}{\texttt{TFEL}}}
\newcommand{\mfront}{\href{http://www.tfel.sourceforge.net}{\texttt{MFront}}}
\newcommand{\pleiades}{\texttt{PLEIADES}}
\newcommand{\salome}{\href{http://www.salome-platform.org}{\texttt{salome}}}

\newcommand{\cea}{\href{http://www.cea.fr}{CEA}}
\newcommand{\edf}{\href{http://www.edf.com}{EDF}}
\newcommand{\inria}{\href{http://www.inria.fr}{INRIA}}
\newcommand{\castem}{\href{http://www-cast3m.cea.fr}{\texttt{Cast3M}}}
\newcommand{\cyrano}{Cyrano3} 
\newcommand{\aster}{\href{http://www.code-aster.org}{Code-Aster}} 
\newcommand{\zebulon}{\href{http://www.zset-software.com/products/zebulon}{\texttt{ZeBuLoN}}}
\newcommand{\amitex}{\href{http://www.maisondelasimulation.fr/projects/amitex/html}{\texttt{AMITEX\_FFT}}}
\newcommand{\gpl}{\href{http://www.gnu.org/licenses/gpl-3.0.txt}{GNU Public License}}

\newcommand{\pandoc}{\href{}{pandoc}}
\newcommand{\gcc}{\href{https://gcc.gnu.org/}{gcc}}
\newcommand{\clang}{\href{clang.llvm.org}{clang}}
\newcommand{\icc}{\href{https://software.intel.com/en-us/c-compilers}{icc}}
\newcommand{\msys}{\href{http://www.mingw.org/wiki/MSYS}{MSYS}}
\newcommand{\jenkins}{\href{http://jenkins-ci.org}{\texttt{Jenkins}}}

\lstset{ %
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\tiny,       % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{red},        % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  frame=single,                    % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{blue},       % keyword style
  language=C++,                    % the language of the code
  morekeywords={Output Author Input Date},            % if you want to add more keywords to the set
  numbers=none,                    % where to put the line-numbers; possible values are (none, left, right)
  rulecolor=\color{orange},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=1,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{green},       % string literal style
  tabsize=2,                       % sets default tabsize to 2 spaces
}

\Titre{MFront User Meeting: from TFEL \(1.x\) to TFEL \(2.0\)}
\Auteur{Thomas Helfer, Jean-Michel Proix}
\Date{Februar 2015}


\begin{document}

\PageTitre{}

\section{Forewords}

\titre{Table of contents}
\begin{frame}
  {\tiny
    \begin{flushleft}
      \tableofcontents[hideallsubsections]      
    \end{flushleft}
  }
\end{frame}

\intercalaire{A tour of \mfront{}}

\titre{}
\frame{
  \begin{center}
    \includegraphics[width=7cm]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/mfront.eps}
  \end{center}
}

\titre{MFront}
\frame{
  \begin{itemize}
  \item \mfront{} is a code generator based on C++ for:
    \begin{itemize}
    \item material properties
    \item mechanical behaviours
    \item models
    \end{itemize}
  \item \mfront{} provides several {\em domain specific languages}:
    \begin{itemize}
    \item ease of use, expressivness, etc..
      \begin{itemize}
      \item focus on physical content
      \end{itemize}
    \item low programming skills requirements
    \item numerical efficiency..
    \end{itemize}
  \end{itemize}
}

\titre{A first example: material property}
\begin{frame}<1-2>
  \begin{center}
    \alt<1>{
      \lstinputlisting[lastline=9,language=C++]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/UO2_YoungModulus_Martin1989.mfront}
    }{
      \lstinputlisting[language=C++]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/UO2_YoungModulus_Martin1989-2.mfront}
    }
    \(E\paren{T,f}=2.2693\,10^{11}\,(1-2.5\,f)\,(1-6.786\,10^{-5}\,T-4.23\,10^{-8}\,T^{2})\)
  \end{center}
\end{frame}

\titre{Mechanical behaviour: a reminder}
\frame{
  \begin{itemize}
  \item mechanical equilibrium, find \(\Delta\discret{\vec{u}}\) such:
    \[
    \small
    \residuEF\paren{\Delta\discret{\vec{u}}}=\discret{\vec{O}}\quad\text{
    avec
  }\quad\residuEF\paren{\Delta\discret{\vec{u}}}=\forceintEF\paren{\Delta\discret{\vec{u}}}-\forceextEF
  \]
  \item<2-> internal force:
    \alt<-2>{
      \[
      \small
      \begin{aligned}
        \forceintElem&=\int_{V^{e}}\tsigma_{t+\Delta
          t}\paren{\Delta\,\tepsilonto,\Delta\, t}\colon\tenseur{B}\;\dtot V \\
        &=  \sum_{i=1}^{N^{G}} \paren{\psframebox[linecolor=red]{\tsigma_{t+\Delta
            t}\paren{\Delta\tepsilonto\paren{\vec{\eta}_{i}},\Delta\, t}}\colon\tenseurq{B}\paren{\vec{\eta}_{i}}}w_{i}
      \end{aligned}
      \]
    }{
      \[
      \small
      \forceintElem = \sum_{i=1}^{N^{G}} \paren{\psframebox[linecolor=red]{\tsigma_{t+\Delta
          t}\paren{\Delta\tepsilonto\paren{\vec{\eta}_{i}},\Delta\, t}}\colon\tenseurq{B}\paren{\vec{\eta}_{i}}}w_{i}
      \]
    }
  \item<3-> Newton-Raphson algorithm:
    \[
    \small
    \alt<3>{\Delta\discret{\vec{u}}^{n+1}=\Delta\discret{\vec{u}}^{n}-\paren{\left.\deriv{\residuEF}{\Delta\discret{\vec{u}}}\right|_{\Delta\discret{\vec{u}}^{n}}}^{-1}.\residuEF\paren{\Delta\discret{\vec{u}}^{n}}= \Delta\discret{\vec{u}}^{n}-\tenseurq{\mathbb{K}}^{-1}.\residuEF\paren{\Delta\discret{\vec{u}}^{n}}}{
      \Delta\discret{\vec{u}}^{n+1}=\Delta\discret{\vec{u}}^{n}-\tenseurq{\mathbb{K}}^{-1}.\residuEF\paren{\Delta\discret{\vec{u}}^{n}}
    }
    \]
  \item<4-> elementary stiffness:
    \[
    \small
    \tenseurq{\mathbb{K}}^{e}=\displaystyle\sum_{i=1}^{N^{G}}
    \mbox{}^{t}\tenseurq{B}\paren{\vec{\eta}_{i}}\colon\psframebox[linecolor=red]{\deriv{\Delta\tsigma}{\Delta\tepsilonto}\paren{\vec{\eta}_{i}}}\colon\tenseurq{B}\paren{\vec{\eta}_{i}}w_{i}
    \]
    where \(\scriptsize\deriv{\Delta\tsigma}{\Delta\tepsilonto}\) is the {\em tangent consistent operator}.
  \end{itemize}
}

\titre{Mechanical behaviour function}
\frame{
  \begin{itemize}
  \item the mechanical behaviour must:
    \begin{itemize}
    \item compute the stress tensor \(\tsigma\) at the end of the time
      step for a given strain increment \(\Delta\,\tepsilonto\)
      \begin{itemize}
      \item this requires to compute the internal state variables increments
      \end{itemize}
    \item give (at least an approximation of) of \(\deriv{\Delta\tsigma}{\Delta\tepsilonto}\)
      \begin{itemize}
      \item other operators shall be allowed (unloading)
      \end{itemize}
    \item warn if a variable is out of its bounds:
      \begin{itemize}
      \item physical bounds: computations have gone bad, really really
        bad (negative temperature)
      \item "standar" bounds: correlation is not valid
      \end{itemize}
    \end{itemize}
  \item<2-> the mechanical behaviour shall (to be developed):
    \begin{itemize}
    \item give an estimate of the next time step
    \item warn if the given strain increment is too large
    \item warn if the given strain increment leads to unreliable
      results:
      \begin{itemize}
      \item an increment of \(10\,\%\) of the equivalent plastic
        strain is {\bf not} admissible whatever the integration scheme
        is used
      \end{itemize}
    \end{itemize}
  \end{itemize}
}

\titre{An example of mechanical behaviour}
\begin{frame}
  \begin{center}
    \lstinputlisting[language=C++]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/plasticity.mfront}
  \end{center}
  \begin{itemize}
  \item A simple \(J_{2}\) (isotropic) plastic behaviour:
    \begin{itemize}
    \item example of specific behaviour implementation
    \item automatic computation of the consistent tangent operator
    \end{itemize}
  \item various domain specific languages are available to cope with:
    \begin{itemize}
    \item general small strain behaviours, general finite strain
      behaviours, cohesive zone models
    \item explicit integration schemes
      \begin{itemize}
      \item various Runge-Kutta algorithms available
      \end{itemize}
    \item implicit integration schemes
      \begin{itemize}
      \item various algorithms available
      \end{itemize}
    \end{itemize}
  \end{itemize}
\end{frame}

\titre{Implicit schemes: a reminder}
\frame{
    \begin{itemize}
    \item mechanical behaviour integration is solving the following ode
      over a time step \(\Delta\,t\):
      \[
      \dot{Y} = G\paren{Y,t}
      \]
      where \(Y\) are the internal state variables packed in a vector,
      and \(t\) stands for the evolution of some external state
      variables (temperature)
    \item implicit schemes leads to a non-linear system of equations~:
      \[
      F\paren{\Delta\, Y} = \Delta\, Y -
      \Delta\,t\,G\paren{Y_{t}+\theta\Delta{Y},t+\theta\,\Delta t} = 0
      \]
    \item Most algorithms require {\tiny \(J=\deriv{F}{\Delta\,Y}=
      \begin{pmatrix}
        \deriv{f_{y_{1}}}{\Delta\, y_{1}} & \ldots & \ldots & \ldots & \ldots \\
        \vdots & \vdots & \vdots & \vdots & \vdots \\
        \vdots & \vdots & \deriv{f_{y_{i}}}{\Delta\, y_{j}} & \vdots & \vdots \\
        \vdots & \vdots & \vdots & \vdots & \vdots \\
        \ldots & \ldots & \ldots & \ldots & \deriv{f_{y_{N}}}{\Delta\, y_{N}} \\
      \end{pmatrix}
      \)}
    \item if an analytical jacobian is provided, it can be compared to a
      numerical one: {\tt @CompareToNumericalJacobian true;}
    \end{itemize}
}

\titre{Code generation and interfaces}
\begin{frame}
  \begin{center}
    \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/MFrontPrinciple.eps}
  \end{center}
  \begin{itemize}
  \item finite elements solver currently supported:
    \begin{itemize}
    \item \castem{}, \aster{}, \zebulon{}
    \end{itemize}
  \item Fast Fourier transform solver~:
    \begin{itemize}
    \item \texttt{TMFFT}, \amitex{}
    \end{itemize}
  \item fuel performances code:
    \begin{itemize}
    \item \cyrano{}
    \end{itemize}
  \end{itemize}
\end{frame}

\intercalaire{Highlights}

\titre{}
\frame<1-8>{
  \begin{center}
    \alt<1>{
      \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/FuelRod-ddif2.eps}
    }{
      \alt<2>{
        \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/172_5pc.eps}
      }{
        \alt<3>{
          \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/MoxBoule3D_gonfl_compXY.eps}
          }{
            \alt<4>{
              \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/VoidsGrowth.eps}
            }{ 
              \alt<5>{
                \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/AMITEX_FFTP_sig1.eps}
              }{
                \alt<6>{
                  \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/p.eps} \\
                  Cladding failure in RIA. T. Helfer. Alcyone/Licos. 2015
                }{
                  \alt<7>{
                    \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/bary.eps}\\
                    Cement. B. Bary. Cast3M. 2015
                  }{
                    \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/hsnv125.eps}              
                  }}}}}}}
  \end{center}

}

\intercalaire{The "product"}

\titre{Licences: Open-source (again) !}
\frame{
  \begin{itemize}
  \item To meet \cea{} and \edf{} needs, TFEL \(2.0\) is released
    under a multi-licensing scheme:
    \begin{itemize}
    \item open-source licences~:
      \begin{itemize}
      \item \gpl{}: This licence is used by the \aster{} finite element solver.
      \item \href{http://www.cecill.info/}{CECILL-A}: License
        developped by \cea{}, \edf{} and \inria{}, compatible with the
        \gpl{} and designed for conformity with the French law.
      \end{itemize}
    \item \cea{} and \edf{} are free to distribute \tfel{} under
      custom licences: Mandatory for the \pleiades{} plateform.
    \end{itemize}
    \item number of downloads since October 2014:
      \begin{itemize}
      \item \texttt{tfel-2.0}  :  66
      \item \texttt{tfel-2.0.1}:  35
      \item we did only little promotion:
        \begin{itemize}
        \item the \castem{} site
        \item Materiaux 2014
        \end{itemize}
      \end{itemize}
  \end{itemize}
}

\titre{Versions and development branches}
\frame{
  \begin{itemize}
  \item two official versions:
    \begin{itemize}
    \item version \(2.0\)  : first open-source release
    \item version \(2.0.1\): minor corrections to \(2.0\) and improved
      packaging.
    \end{itemize}
  \item suberversion repository:
    \begin{center}
      \url{https://svn-pleiades.cea.fr/SVN/TFEL/trunk}      
    \end{center}
  \item current branches:
    \begin{itemize}
    \item \texttt{rliv-2.0}
    \item \texttt{trunk}
    \item \texttt{rdev-3.0} port to \texttt{C++-11}
    \end{itemize}
  \end{itemize}
}

\titre{Portability}
\frame{
  \begin{itemize}
  \item \tfel{} \(2.0.x\) is based on the \texttt{C++98} standard
  \item \tfel{} can be compiled with various \texttt{C++} compilers:
    \begin{itemize}
    \item \gcc{}, from version \(3.4\) to version \(4.9.2\)
    \item \clang{}, from version \(3.3\) to version \(3.5\)
    \item \icc{}, from version \(10\) to version \(13\)
    \end{itemize}
  \item \tfel{} is mainly developed on \linux{}
  \item ports have been made to various POSIX systems \freebsd{},
    \opensolaris{}, etc...
  \item a windows port is also available (requires \msys{})
  \end{itemize}
}

\titre{Documentation}
\frame{
  \begin{itemize}
  \item reference manuals:
    \begin{itemize}
    \item general introduction. Material properties and models
    \item writing mechanical behaviours
    \item how to handle plane stress in implicit schemes
    \item finite strain behaviours
    \item tutorial
    \end{itemize}
  \item various talks and tutorials
  \item documentation of solver interfaces
  \end{itemize}
}

\titre{Software quality}
\frame{
  \begin{itemize}
  \item very stringent compilers warnings:
    \begin{itemize}
    \item \texttt{g++ -Wall -W -Wextra -pedantic
        -Wdisabled-optimization -Wlong-long -Winline -Wswitch
        -Wsequence-point -Wignored-qualifiers
        -Wzero-as-null-pointer-constant -Wvector-operation-performance
        -Wtrampolines -Wstrict-null-sentinel -Wsign-promo
        -Wsign-conversion -Wold-style-cast -Wnoexcept
        -Wmissing-include-dirs -Wmissing-declarations -Wlogical-op
        -Winit-self ...}
    \item \texttt{clang -Weverything -Wno-c++98-compat
        -Wno-global-constructors -Wno-exit-time-destructors
        -Wno-documentation -Wno-padded}
    \end{itemize}
  \item continuous integration based on \jenkins{}
  \item more than \(6\,00\) tests:
    \begin{itemize}
    \item most of them are based on \mtest{}
    \item not enough unit testing (low coverage ratio)
    \end{itemize}
  \item more tests inside \pleiades{} applications.
  \end{itemize}
}

\intercalaire{Communications}

\titre{The website}
\frame{
  \begin{center}
    \includegraphics[width=0.8\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/website.eps}    
  \end{center}
  \begin{center}
    \url{http://tfel.sourceforge.net}
  \end{center}
}

\titre{Papers and Talks}
\frame{
  \begin{itemize}
  \item a list of papers and talks describing works done with MFront
    is available in the appendix
  \item {\em Introducing the open-source \mfront{} code generator:
      application to mechanical behaviours and material knowledge
      management within the PLEIADES fuel element modelling
      plateform}. Helfer, Thomas and Proix, Jean-Michel and Michel,
    Bruno and Salvo, Maxime and Sercombe, Jérôme and Casella,
    Michel. Under review. Computers \& Mathematics with Application.
  \item {\em Implantation de lois de comportement mécanique à l'aide de MFront :
      simplicité, efficacité, robustesse et portabilité.} T. Helfer,
    J.M. Proix, O. Fandeur. CSMA. 12ème colloque national en calcul des
    structures. May 18-22 2015. Giens, France.
  \end{itemize}
}

\intercalaire{What is new in \tfel{}{\tt/Math}}

\titre{Non symmetric tensors}
\frame{
  \begin{itemize}
  \item non symmetric tensors {\tt tensor}
  \item various functions:
    \begin{itemize}
    \item {\tt polar\_decomposition}, {\tt transpose}, {\tt det}, {\tt
        convertSecondPiolaKirchhoffStressToCauchyStress}, {\tt
        convertCauchyStressToSecondPiolaKirchhoffStress} {\tt
        computeDeterminantDerivative}, {\tt push\_forward}, {\tt
        computeGreenLagrangeTensor}, {\tt
        computeRightCauchyGreenTensor}, {\tt syme}, {\tt trace}
    \end{itemize}
  \end{itemize}
}

\titre{Various fourth order tensors}
\frame{
  \begin{itemize}
  \item {\tt t2tot2}, {\tt t2tost2}, {\tt st2tot2}
  \item various functions:
    \begin{itemize}
    \item {\tt computeKirchoffStressDerivativeFromCauchyStressDerivative},
    \item {\tt computePushForwardDerivative}
    \end{itemize}
  \item static methods:
    \begin{itemize}
    \item {\tt t2tot2<N,T>::tpld} (tensor product left derivative)
    \item {\tt t2tot2<N,T>::tprd} (tensor product right derivative)
    \item \(\dtot\paren{\tns{A}\,\star\,\tns{B}} =\underbrace{\dtot^{\star}_{\text{l}}\paren{\tns{A}}}_{\text{\texttt{tpld(A)}}}\,\colon\,\dtot\,\tns{B}+
      \underbrace{\dtot^{\star}_{\text{l}}\paren{\tns{B}}}_{\text{\texttt{tprd(B)}}}\,\colon\,\dtot\,\tns{A}\)
    \item "optimised" version:
     \[
     \deriv{}{\tns{X}}\paren{\tns{A}\,\star\,\tns{B}} =\underbrace{\dtot^{\star}_{\text{l}}\paren{\tns{A}}\,\colon\,\deriv{\tns{B}}{\tns{X}}}_{\text{\texttt{tpld(A,dBdX)}}}+
     \underbrace{\dtot^{\star}_{\text{l}}\paren{\tns{B}}\,\colon\,\deriv{\tns{A}}{\tns{X}}}_{\text{\texttt{tprd(B,dAdX)}}}
     \]
    \end{itemize}
  \end{itemize}
}

\titre{Eigenvalues and eigentensors derivatives}
\frame{
  \begin{itemize}
  \item if \(\vec{e}_{i}\) are the eigenvectors of \(\tenseur{s}\),
    then one may define the following symmetric tensors:
    \[
    \tenseur{n}_{ij} = 
    \left\{
      \begin{aligned}
        \vec{e}_{i}\otimes\vec{e}_{i} & \text{ if }&  i=j \\
        \Frac{1}{\sqrt{2}}\paren{\vec{e}_{i}\otimes\vec{e}_{j}+\vec{e}_{j}\otimes\vec{e}_{i}}    & \text{ if }& i \neq j
      \end{aligned}
    \right.
    \]
  \item \(\tenseur{n}_{ii}\) are the {\em eigentensors} of \(\tenseur{s}\):
    \[
    \tenseur{s}=\sum_{i=0}^{3}\lambda_{i}\,\tenseur{n}_{ii}
    \]
  \item the derivatives of \(\lambda_{1}\) and \(\tenseur{n}_{11}\)
    are\footnote{There is an equivalent (but less
      explicit) expression in~\cite{miehe_anisotropic_2002}}~:
    \[
    \left\{
      \begin{aligned}
        \deriv{\lambda_{1}}{\tenseur{s}} &= \tenseur{n}_{11} \\
        \deriv{\tenseur{n}_{11}}{\tenseur{s}} &= \Frac{1}{\lambda_{1}-\lambda_{2}}\tenseur{n}_{12}\,\otimes\,\tenseur{n}_{12}+\Frac{1}{\lambda_{1}-\lambda_{3}}\tenseur{n}_{13}\,\otimes\,\tenseur{n}_{13}
      \end{aligned}
    \right.
    \]
  \end{itemize}
}

\titre{Isotropic function of tensors derivatives}
\frame{
  \begin{itemize}
  \item if \(f\) is a scalar function, one may define~:
    \[
    f\paren{\tenseur{s}}=\sum_{i=0}^{3}f\paren{\lambda_{i}}\,\tenseur{n}_{ii}
    \]
  \item if \(f\paren{x}\) is \(\mathcal{C}^{1}\), then
    \(f\paren{\tenseur{s}}\) is also differentiable.
  \item applications:
    \begin{itemize}
    \item convert the dual stress of the logarithmic strain (or any of
      the Seth-Hill family of strains) to the second Piola-Kirchhoff
      stress (see below)
    \item derivatives of the positive/negative parts of a tensor that
      appears in~:
      \begin{itemize}
      \item the jacobian matrix of behaviours mixing Mazars damage and
        creep
      \item unilateral effects of some damage behaviour
        (modified Marigo/Lorentz model)
      \end{itemize}
    \end{itemize}
  \end{itemize}
}

\intercalaire{Various new features in \mfront{}}

\titre{Consistent tangent operator}
\frame{
  \begin{itemize}
  \item Almost mandatory for \aster{}, \cyrano{} and \zebulon{}
  \item {\tt @TangentOperator} keyword
  \item Various prediction operators can be requested:
    \begin{itemize}
    \item elastic
    \item secant
    \item tangent
    \item consistent tangent operator
    \end{itemize}
  \item Automatically provided for specific parsers:
    \begin{itemize}
    \item Except for {\tt MultipleIsotropicMisesFlows} (although
      documented...)
    \end{itemize}
  \item some interfaces (\castem{}, \aster{}) allow a comparison of the
    computed tangent operator to a numerical one.
  \end{itemize}
}

\titre{{\tt getPartialJacobianInvert}}
\frame{
  \begin{itemize}
  \item for implicit schemes, {\bf in most cases}, the consistent
    tangent operator can be derived \og{}for free\fg{} using the upper
    left part of the implicit system jacobian invert
    (!)~\cite{besson_numerical_2004}:
    \[
    \deriv{\Delta\,\tsigma}{\Delta\,\tepsilonto}=\tenseurq{D}\,\colon\,\deriv{\Delta\,\tepsilonel}{\Delta\,\tepsilonto}=\tenseurq{D}\,\colon\,J^{-1}_{\tepsilonel}
    \]
  \item requires:
    \begin{itemize}
    \item small strain behaviour (possible extension to finite strain, but this is more complex)
    \item \(\tepsilonel\) must be the first variable of the implicit scheme
    \item partition of strain:
      \[
      f_{\tepsilonel}=\Delta\,\tepsilonel-\Delta\,\tepsilonto+....
      \]
    \item \(\Delta\,\tepsilonto\) only appears in \(f_{\tepsilonel}\)
    \item stress-strain relationship is linear elastic (easy extension
      to damage/non linear elasticity):
      \[
      \tsigma=\tenseurq{D}\,\colon\,\tepsilonel
      \]
    \end{itemize}
  \end{itemize}
}

\titre{Prediction operator}
\frame{
  \begin{itemize}
  \item {\tt @PredictionOperator} keyword
  \item Various prediction operators can be requested:
    \begin{itemize}
    \item Elastic
    \item Secant
    \item Tangent
    \end{itemize}
  \item Automatically provided for specific parsers:
    \begin{itemize}
    \item Except for {\tt MultipleIsotropicMisesFlows}
    \item Plastic parser does not have the tangent operator (requires
      an additional state variable)
    \end{itemize}
  \end{itemize}
}

\titre{New algorithms for the Implicit parser}
\frame{
  \begin{itemize}
  \item increasing the robutness of the standard Newton-Raphson schemes:
    \begin{itemize}
    \item limiting the size of the increments:
      \begin{itemize}
      \item \texttt{@MaximumIncrementValuePerIteration 1.e-4;}
      \item \texttt{return false;}
      \end{itemize}
    \end{itemize}
  \item globalisation techniques:
    \begin{itemize}
    \item Levenberg-Marquart
    \item coupling Newton-Raphson and the Gauss method through a
      \textbf{simplified} Powell's dogleg algorithm (constant
      trust-region size)
    \item introduction of the class \texttt{MFrontNonLinearSolver}:
      \begin{itemize}
      \item new algorithms can easily be added
      \end{itemize}
    \end{itemize}
  \end{itemize}
}

\titre{Improved robustness}
\frame<1-2>{
  \begin{center}
    \alt<1>{
      \includegraphics[width=0.8\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/convergence-1.eps}
    }{
      \includegraphics[width=0.8\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/convergence-2.eps}
    }
  \end{center}
}

\intercalaire{Finite strain}

\titre{Two approaches}
\frame{
  \begin{itemize}
  \item reusing small-strain behaviours implementations:
    \begin{itemize}
    \item using {\em finite strain strategies} (see below)
    \item this leads to \textbf{new} behaviours
    \end{itemize}
  \item writing behaviours in a general finite strain framework:
    \begin{itemize}
    \item \(\bts{\tns{F}}\) and \(\ets{\tns{F}}\) as inputs
    \item Cauchy stress \(\sigma\) as output.
    \item what is the consistent tangent operator ?
    \end{itemize}
  \end{itemize}
}

\titre{Finite strain strategies in \castem{}}
\frame{
  \begin{center}
    \lstinputlisting[language=C++]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/umatfinitestrainstrategies.mfront}
  \end{center}
  \begin{itemize}
  \item small strain formalism can be reused to build
    \textit{consistent} finite strain behaviours:
    \begin{itemize}
    \item this creates a \textbf{new} behaviour !
    \end{itemize}
  \item two lagrangian finite strain strategies are available:
    \begin{itemize}
    \item finite rotation, small deformation. Available in
      \aster~\cite{edf_loi_2013}.
    \item logarithmic strains based on Miehe et al.
      \cite{miehe_anisotropic_2002}. Available in
      \aster~\cite{edf_modeles_2013} and \zebulon{}.
    \end{itemize}
  \item \textbf{restriction:}
    \begin{itemize}
    \item swelling and thermal expansion must be taken into account
      within the behaviour.
    \end{itemize}
  \end{itemize}
}

\titre{Logarithmic strains - Principle}
\frame{
  \begin{center}
    \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/logarithmicstrains.eps}
  \end{center}
  \begin{itemize}
  \item\(\tenseur{T}\) is the dual of the logarithmic strain
    \(\tepsilonto{}_{\text{log}}\):
    \begin{center}
      \(P=\tenseur{T}\,\colon\,\tdepsilonto{}_{\text{log}}=\tenseur{S}\,\colon\,\tdepsilonto{}_{\text{GL}}\)
    \end{center}
  \item if the small strain behaviour is {\em thermodynamically
      consistent}, so does the corresponding finite strain behaviour.
  \item the behaviour is {\em objective} due to its lagrangian nature.
  \item \textit{no restriction} on the small strain behaviour (initial
    and induced {\em orthotropy} can be handled appropriately)
  \item \textbf{drawbacks:} the pre- and post-processing stage are non
    trivial and may have a significant computation costs.
  \item \(1D\) is a very interesting case (fuel performance codes):
    \begin{itemize}
    \item see appendix
    \end{itemize}
  \end{itemize}
}

\titre{Logarithmic strains - Applications}
\frame{
  \begin{tabular}[htbp]{cc}
    \multicolumn{2}{c}{
      \includegraphics[width=\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/VoidCoalescence-1.eps}
    } \\
    \begin{minipage}{0.59\linewidth}
      \begin{itemize}
      \item steel used for PWR reactors internals
      \item elasto-plastic behaviour
      \item ability to cope for very large strains
      \item Results by J. Hure et al. (see Cast3M User Meeting 2014)
      \end{itemize}
    \end{minipage}&
    \begin{minipage}{0.39\linewidth}
      \begin{center}
        \includegraphics[width=0.75\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/VoidCoalescence-2.eps}
      \end{center}
    \end{minipage} \\
  \end{tabular}
}

% \titre{\(UO_{2}\) strain-rate controlled compression tests - I}
% \frame{
%   \begin{center}
%     \includegraphics[width=0.45\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/UO2CDRTesting.eps}
%   \end{center}
%   \begin{itemize}
%   \item high strain rates compression tests of uranium dioxide.
%     \begin{itemize}
%     \item significant strain reached during tests 
%     \end{itemize}
%   \item is stress increase due to hardening or to finite strain
%     effects:
%     \begin{itemize}
%     \item can this test be modelled by a stationnary creep behaviour
%       in the logarithmic space ?
%     \end{itemize}
%   \end{itemize}
% }

\titre{Saint-Venant Kirchhoff}
\frame{
  \begin{center}
    \lstinputlisting[language=C++,lastline=25]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/SaintVenantKirchhoffElasticity.mfront}
  \end{center}
  \[
  \tenseur{S}=\lambda\,\trace{\tepsilonto_{GL}}\,\tenseur{I}+2\,\mu\,\tepsilonto_{GL}
  \]
}

\titre{Consistent tangent operator - I}
\frame{
  \begin{itemize}
  \item each finite element solver has its own finite strain
    formulation which defines the expected consistent tangent
    operator (except \castem{}):
    \[
    \tenseurq{D}^{\texttt{tang}}=\deriv{\ets{\tenseur{\tau}}}{\Delta\,\tns{F}}\quad\text{avec}\quad\Delta\,\tns{F}=\ets{\tns{F}}\,.\bts{\tns{F}}^{-1}
    \]
    where \(\tau\) is the Kirchhoff stress and \(\Delta\,\tns{F}\)
    is the "spatial" increment of the deformation gradient
    (\(\Delta\,\tns{F}=\ets{\tns{F}}\,.\bts{\tns{F}}^{-1}\))
  \item each finite strain behaviour has a "natural" consistent
    tangent operator:
    \begin{itemize}
    \item Saint-Venant Kirchoff: \(\deriv{\Delta\, \tenseur{S}}{\Delta\,\tepsilonto_{GL}}\)
    \end{itemize}
  \end{itemize}
}

\titre{Consistent tangent operator - II}
\frame{
  \begin{center}
    \lstinputlisting[language=C++,firstline=27,lastline=30]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/SaintVenantKirchhoffElasticity.mfront}
  \end{center}
  \begin{itemize}
  \item The user is allowed to define one or more expressions of the
    tangent operator. A special algorithm tries to find the shortest
    conversion path to provide the consistent tangent operator
    expected by the code~:
    \[
    \deriv{\ets{\tenseur{S}}}{\Delta\,\tepsilonto_{GL}}\Rightarrow
    \deriv{\ets{\tenseur{S}}}{\ets{\tenseur{C}}}\Rightarrow
    \deriv{\ets{\tenseur{\tau}}}{\ets{\tns{F}}}\Rightarrow
    \deriv{\ets{\tenseur{\tau}}}{\Delta\,\ets{\tns{F}}}
    \]
  \end{itemize}
}

\titre{Application: Finite strain single crystal plasticity}
\begin{frame}
  \begin{center}
    \includegraphics[width=6.5cm]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/decompo.eps}     
  \end{center}
  \begin{itemize}
  \item Multiplicative split of the deformation gradient
    \(\tns{F} = \tns{F}_e\,.\,\tns{F}_p\)
  \item Elasticity: \(\tenseur{S}=\tenseurq{D}\,\colon\,\tepsilonto_{GL}\)
  \item Viscoplatic flow~:
    \[\tns{\dot{F}_p}\,.\,\tns{F_p}^{-1}=\sum_{s}\dot{\gamma}\paren{\tau^s}\,\tns{N}^s\]
  \item Resolved shear stress: \(\tau^s = \tenseur{M}\,\colon\,\Frac{1}{2}\,\paren{\tns{N}^s+\left.\transpose{\tns{N}}\right.^s}\)
  \end{itemize}
  \begin{center}
    This forms covers most single crystal behaviours
  \end{center}
\end{frame}

\titre{Some results}
\begin{frame}
  \begin{minipage}{0.70\textwidth}
    \begin{itemize}
    \item Computations on aggregates (Voronoi or realistic)
      \begin{itemize}
      \item macroscopic behaviour
      \item ductile failure (porous model)
      \end{itemize}
    \end{itemize}
  \end{minipage}
  \begin{minipage}{0.25\textwidth}
    \includegraphics[width=3.0cm]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/JSI.eps}
  \end{minipage}
  \vspace{-0.8cm}
  \begin{center}
    \includegraphics[width=4.5cm]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/compo304.eps}
    \includegraphics[width=3.5cm]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/voro.eps}
  \end{center}
\end{frame}

\intercalaire{Plane stress and generalised plane stress in Implicit
  Parser}

\titre{Implicit parser}
\frame{
  \begin{center}
    \lstinputlisting[language=C++]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/planestress.mfront}
  \end{center}
  \begin{itemize}
  \item introduced for the Cyrano fuel performance code.
  \item explicitly declare the behaviour usable in plane stress.
  \item define the axial strain as a new state variable.
  \item its evolution is implicitly given by the plane strain condition:
    \(\sigmaz=0\)
  \end{itemize}
}

\intercalaire{\mtest{}}

\titre{Overview}
\frame{
  \begin{center}
    \lstinputlisting[language=C++]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/example.mtest}
  \end{center}
  \begin{itemize}
  \item \mtest{} is a tool used to simulate the mechanical behaviour a
    single material point:
    \begin{itemize}
    \item unit tests (primary job)
      \begin{itemize}
      \item able to compare results to reference values or analytical
        solution
      \item generates XML output with \jenkins{}
      \end{itemize}
    \item simulations of simple tests:
      \begin{itemize}
      \item uniaxial tensile and compression tests
      \item Satoh tests
      \end{itemize}
    \end{itemize}
  \item available as an executable or a \python{} library
  \end{itemize}
}

\titre{Acceleration algorithms}
\frame{
  \begin{itemize}
  \item equilibrium algorithm:
    \[
    R\paren{\Delta\,\tepsilonto}=0
    \Leftrightarrow
    \Delta\,\tepsilonto=\Delta\,\tepsilonto-K^{-1}\,R\paren{\Delta\,\tepsilonto}=0
    \]
    \(K\) is elastic stiffness
  \item fixed point method (linear and (very) slow convergence):
    \[
    \begin{aligned}
      \Delta\,\tepsilonto_{n+1}&=\Delta\,\tepsilonto_{n}-K^{-1}\,R\paren{\Delta\,\tepsilonto_{n}}=G\paren{\Delta\,\tepsilonto_{n}}\\
    \end{aligned}
    \]
  \end{itemize}
  \begin{minipage}{0.45\linewidth}
    \begin{itemize}
    \item acceleration method:
      \begin{itemize}
      \item Anderson (used in \castem{} for years, much improved after
        2007 to take contact into account)
      \item Secant, Irons-Tuck
      \end{itemize}
    \item slower than Newton-Raphson, but does not requires the
      consistent tangent operator !    
    \end{itemize}
  \end{minipage}
  \begin{minipage}{0.45\linewidth}
    \begin{center}
      \includegraphics[width=\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/AccelerationAlgorithm.eps}
    \end{center}
  \end{minipage}
}

\titre{Behaviour parameter adjustment}
\frame{
  \begin{center}
    \includegraphics[width=0.45\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/CourbeExpBurger.eps}
  \end{center}

  \begin{itemize}
  \item \mtest{} can be coupled with Mathlab and \adao{}:
    \begin{itemize}
    \item \adao{} is a tool developed within \salome{}
    \item use case of \mtest{} \python{} bindings.
    \end{itemize}
  \end{itemize}
}

\intercalaire{Assurance quality}

\titre{Embedded documentation (alpha stage)}
\frame{
  \begin{itemize}
  \item doxygen-like comments cant be used to comment \mfront{} files
  \item comment are used to build a markdown file using \pandoc{}
    syntax:
    \begin{itemize}
    \item file is then convertible to Word, PDF, etc...
    \end{itemize}
  \end{itemize}
}

\titre{Pedantic mode}
\frame{
  \begin{itemize}
  \item {\tt mfront -{}-pedantic}
  \item name comes from \gcc{} comment line option
  \item pedantic mode provides advances warnings about a file:
    \begin{itemize}
    \item unused variables:
    \item variables with no glossary/entry names;
    \item variables with no bounds;
    \item variables that can be converted to integration variables;
    \item etc...
    \end{itemize}
  \end{itemize}
}

\titre{Profiling}
\frame{
  \begin{itemize}
  \item must use \texttt{-{}-enable-cxx11} when calling {\tt
      configure} or {\tt -Denable-cxx11} when calling {\tt cmake}
  \item enables the {\tt @Profiling keyword}:
    \begin{center}
      {\tt @Profiling true;}
    \end{center}
  \end{itemize}
}

\intercalaire{Conclusions}

\titre{Acknowledgements to contributors}
\frame{
  \begin{itemize}
  \item J. M. Proix, J. Hure, F. Hamon, I. Ramière, , É. Castelier
    O. Fandeur, V. Blanc, J. Julien, B. Michel, B. Bary,
    F. Milliard, A. Courcelle, and all the others for various contributions.
  \item all the persons who contributed to the open-source release of
    \tfel{}: J. P. Defain, T. De Soza, V. Marelle, É. Lorentz,
    C. Toulemonde, F. Curtit, R. Masson, and all the others.
  \item the authors are grateful to J. Besson and S. Quilici for their
    valuable help in building the \zebulon{} interface.
  \end{itemize}
}

\titre{Acknowledgements}
\frame{
  \begin{itemize}
  \item This research was conducted in the framework of the PLEIADES
    project, which was supported financially by the CEA (Commissariat
    à l’Énergie Atomique et aux Énergies Alternatives), EDF
    (Électricité de France) and AREVA and in the framework of the
    Simu-Meca2015 project hold within EDF R\&D.
  \end{itemize}
}

\intercalaire{Appendix}

\titre{Publications - I}
\frame{
  \begin{itemize}
  \item {\em Experimental characterization and modelling of \(UO_{2}\)
      behavior at high temperatures and high strain rates} Salvo, Maxime
    and Sercombe, Jérôme and Ménard, Jean-Claude and Julien, Jérôme and
    Helfer, Thomas and Désoyer, Thierry. Jan. 2015. Journal of Nuclear
    Materials.
  \item {\em Introducing the open-source \mfront{} code generator:
      application to mechanical behaviours and material knowledge
      management within the PLEIADES fuel element modelling
      plateform}. Helfer, Thomas and Proix, Jean-Michel and Michel,
    Bruno and Salvo, Maxime and Sercombe, Jérôme and Casella,
    Michel. Under review. Computers \& Mathematics with Application.
  \item {\em Licos, a fuel performance code for innovative fuel elements
      or experimental devices design}. Helfer Thomas and Bejaoui
    Syriac. Under review. Nuclear Engineering And Design.
  \end{itemize}
}

\titre{Publications - II}
\frame{
  \begin{itemize}
  \item {\em Extension of monodimensional fuel performance codes to
      finite strain analysis using a lagrangian logarithmic strain
      framework}. Helfer, Thomas. Under review. Nuclear Engineering And
    Design.
  \item {\em Iterative residual based vector methods to accelerate
      fixed point iterations}. Ramière, Isabelle and Helfer,
    Thomas. Under writing.
  \end{itemize}
}

\titre{Talks - 2014}
\frame{
  \begin{itemize}
  \item {\em Modélisation de la fissuration inter-granulaire par
      corrosion sous contraintes pour les aciers
      inoxydables}. Couvant, T. and Meunier, S. and Haboussa, D. and
    Proix, J.-M. Journée des utilisateurs \aster{} et {\tt
      Salome-Meca}. Paris, 18 march 2014.
  \item {\em A thermo-metallurgical-mechanical model of EM10 at high
      temperature}. Courcelle, Arnaud and Millard, Franck and
    Gavoille, Pierre and Le Saux Matthieu and Bosonnet, Sophie and
    Flament Jean-Luc and Guilbert Thomas. Numat 2014. Florida, october
    2014.
  \end{itemize}
}

\titre{Talks - 2014 - II}
\frame{
  \begin{itemize}
  \item {\em Présentation de \mfront{}: applications aux lois de
      comportement mecanique et mesure de performance à l'aide de
      \aster{}}. Helfer, Thomas and Proix, Jean-Michel and Michel,
    Bruno. Matériaux 2014. Montpellier, november 2014.
  \item {\em Microfissuration induite par la viscoplasticité dan les
      céramiques nucléaires}. Michel, Bruno and Soulacroix Julian, and
    Helfer, Thomas. Matériaux 2014. Montpellier, november 2014.
  \item {\em Quelques exemples d'utilisation de lois de comportement en
      grandes déformations générées avec l'outil MFront.} Hure, Jérémy
    and Callahan, Mike and Ling, Chao and Tanguy, Benoît and Helfer,
    Thomas. \castem{} User Meeting. Paris, 28 november 2014.
  \end{itemize}
}

\titre{Talks - 2015}
\frame{
  \begin{itemize}
  \item {\em Implantation de lois de comportement mécanique à l'aide de MFront :
      simplicité, efficacité, robustesse et portabilité.} T. Helfer,
    J.M. Proix, O. Fandeur. CSMA. 12ème colloque national en calcul des
    structures. May 18-22 2015. Giens, France.
  \item {\em Numerical analysis of concrete creep on mesoscopic 3D
      specimens.} B. Bary, C. Bourcier,
    T. Helfer. CONCREEP-10. September 21-23 2015, Autrichia
  \end{itemize}
}

\titre{Logarithmic strains - 1D simulations}
\frame{
  \begin{center}
    \includegraphics[width=0.4\linewidth]{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/img/PlaneStrainInnerHoopStrain.eps}
  \end{center}
  \begin{itemize}
  \item fuel performance code are written using small strain formalism but can
    be adapted to use the logarithmic strains:
    \[
    \tepsilonto_{HPP}=\frac{1}{2}\left[\vec{\nabla}\,\vec{u}+\mbox{}^{tr}\vec{\nabla}\,\vec{u}\right]=\vec{\nabla}\,\vec{u} \rightarrow \tns{F}=\tenseur{I}+\tepsilonto_{HPP}
    \]
    \[
    \left.\epsilon^{\text{to}}_{\text{log}}\right|_{rr} = \log\,\paren{1+\left.\epsilon^{\text{to}}_{\text{HPP}}\right|_{rr}}  \rightarrow
    \left.\sigma_{HPP}\right|_{rr} = \Frac{1}{1+\left.\epsilon^{\text{to}}_{\text{HPP}}\right|_{rr}}\,T_{rr}
    \]
  \item applications to RIA and LOCA...
  \end{itemize}
}

\intercalaire{References}

\titre{}
\frame{
  \bibliographystyle{fr-insa}
  \bibliography{@abs_top_srcdir@/docs/presentations/mfront-user-meeting-2015/bibliographie}
}

\end{document}
